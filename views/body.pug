doctype html
head
    meta(http-equiv='Content-Type' content='text/html; charset=UTF-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(name='viewport' content='width=device-width, initial-scale=1')
    title Interactive Human Anatomy - Front and Back Views
// Image Map Generated by http://www.image-map.net/
img(src='./images/males-1859518_960_720.png' usemap='#image-map')
map(name='image-map')
    area#digestive(name='digestive', alt='digestive', href='', coords='164,277,201,250,232,272,219,308,184,308', shape='poly')
    span.dig-text(id='dig-text') Digestive System
    area#excretoryR(name='excretoryL', alt='excretoryL', href='', coords='148,279,162,279,179,305,147,302', shape='poly')
    span.excL-text Excretory System
    area#circulatory(name='circulatory', alt='circulatory', href='', coords='234,218,218,201,209,217,216,232,230,241,246,231,253,208,240,200,230,212', shape='poly')
    span.circ-text Circulatory System
    area#respiratory(name='respiratory', alt='respiratory', href='', coords='153,183,171,162,183,180,182,243,167,250,153,243', shape='poly')
    span.resp-text Respiratory System
    area#lympathic(name='lympathic', alt='lympathic', href='', coords='209,127,210,113,184,112,186,129', shape='poly')
    span.lymp-text Lymphatic System
    area#nervous(name='nervous', alt='nervous', href='', coords='172,54,174,31,197,21,222,28,231,54', shape='poly')
    span.nerv-text Nervous System
    area#milk(name='milk', alt='milk', href='', coords='215,173,231,161,247,181,243,195,225,200,216,197', shape='poly')
    span.milk-text Milk-producing Glands
    area#skin(name='skin', alt='skin', href='', coords='281,323,297,318,291,295,289,259,282,244,275,197,255,203,254,262', shape='poly')
    span.skin-text Skin
    area#gitract(name='gitract', alt='gitract', href='', coords='145,313,251,312,254,336,216,336,182,336,141,337', shape='poly')
    span.gitract-text(id='gitract-text') Gastrointestinal Tract
    area#productive(name='reproductive', alt='reproductive', href='', coords='172,339,190,368,198,363,208,367,217,341', shape='poly')
    span.prod-text Reproductive System



.row
    .col-xs-12
        div(style='clear:both; height:8px;')
        #selections(style='clear:both;')
script(src="https://code.jquery.com/jquery-3.6.0.min.js")
script(src='https://cdnjs.cloudflare.com/ajax/libs/imagemapster/1.5.4/jquery.imagemapster.min.js')
script(src='/javascripts/body.js')

script.
    function getBodyMapInfo() {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', '/body-map-data', true);
        xhr.responseType = 'json';

        xhr.onload = function () {
            if (xhr.status === 200) {
                const results = xhr.response;
                var giCount = 0;
                var digestCount = 0;
                for (var i = 0; i < results.length; i++) {
                    if (typeof results[i].sample === 'string' && typeof results[i].meta_value === 'string') {
                        if(results[i].meta_value === 'UBERON:feces' || results[i].meta_value === 'Distal gut content'
                            || results[i].meta_value === 'Caecum content' || results[i].meta_value === 'Ileum content') {
                            giCount++;
                            document.getElementById('gitract-text').innerHTML = 'Gastrointestinal Tract (' + giCount + ')';
                        }
                        if(results[i].meta_value === 'G_DNA_Saliva') {
                            digestCount++;
                            document.getElementById('dig-text').innerHTML = 'Digestive System (' + digestCount + ')';
                        }
                    }
                }
            }
        };

        xhr.send();
    }

    document.addEventListener("DOMContentLoaded", function () {
        console.log("getting map info");
        getBodyMapInfo();
    });


style.
    span {
        position: absolute;
        color: white;
        font-size: 14px;
        font-weight: bold;
        background-color: rgba(0, 0, 0, 0.8);
        padding: 3px 5px;
        border-radius: 5px;
        opacity: 1;
    }

    #digestive + span {
        top: 285px;
        left: 200px;
    }

    #excretoryR + span {
        top: 260px;
        left: 130px;
    }

    #circulatory + span {
        top: 225px;
        left: 230px;
    }

    #respiratory + span {
        top: 200px;
        left: 167px;
    }

    #lympathic + span {
        top: 120px;
        left: 192px;
    }

    #nervous + span {
        top: 37px;
        left: 198px;
    }

    #milk + span {
        top: 165px;
        left: 233px;
    }

    #skin + span {
        top: 257px;
        left: 274px;
    }

    #gitract + span {
        top: 325px;
        left: 180px;
    }

    #productive + span {
        top: 353px;
        left: 180px;
    }

